<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime Admin Panel</title>
    <link rel="stylesheet" href="assets/css/admin.css">
    <script type="module" src="./firebase/config.js"></script>
    <script type="module" src="./scripts/admin.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>
<body>
    <!-- Header -->
    <header>
        <div>
            <h1>Anime Admin Panel</h1>
        </div>
        <div>
            <!-- Search Bar -->
            <div class="search-container">
                <input type="text" id="adminAnimeSearch" placeholder="Search by anime name..." onkeyup="searchAdminAnime()">
            </div>
        </div>
        <div>
            <!-- Add Anime Button -->
            <button id="addAnimeBtn"><i class="fa-solid fa-plus"></i> Add New Anime</button>
            <button onclick="logoutAdmin()"><i class="fa-solid fa-right-from-bracket"></i> Logout</button>
        </div>
        
        
    </header>

   

    

    <!-- Add Anime Popup Form -->
    <div id="addAnimePopup" class="popup">
        <div>
            <progress id="uploadProgress" value="0" max="100" style="display: none; width: 100%;"></progress>
            <p id="progressText"></p>
        </div>
        
        <h2>Add New Anime</h2>
        <form id="addAnimeForm">
            <label>Anime Image:</label>
            <input type="file" id="animeImage" required><br>
            <label>Title:</label>
            <input type="text" id="animeTitle" required><br>
            <label>Description:</label>
            <textarea id="animeDescription" required></textarea><br>
            <label>Category:</label>
            <input type="text" id="animeCategory" required><br>
            <label>Episodes Number:</label>
            <input type="number" id="animeEpisodes" required><br>
            <button type="submit">Submit</button>
            <button type="button" onclick="closePopup()">Cancel</button>
        </form>
    </div>

    <!-- Add Episode Modal -->
    <div id="addEpisodeModal" class="modal">
        <div>
            <progress id="episodeUploadProgress" value="0" max="100" style="display: none; width: 100%;"></progress>
            <p id="episodeProgressText"></p>
        </div>
        
        <span class="close" onclick="closeEpisodeModal()">&times;</span>
        <h2>Add New Episode</h2>
        <input type="text" id="episodeTitle" placeholder="Episode Title" required>
        <input type="file" id="episodeFile" accept="video/*" required>
        <button onclick="submitEpisode()">Submit</button>
    </div>

    <!-- Anime List -->
    <table>
        <thead>
            <tr>
                <th>Image</th>
                <th>Title</th>
                <th>Uploaded Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="animeTableBody"></tbody>
    </table>

    <!-- Open and Close Popup Scripts -->
    <script>
        const addAnimeBtn = document.getElementById("addAnimeBtn");
        const addAnimePopup = document.getElementById("addAnimePopup");

        addAnimeBtn.addEventListener("click", () => {
            addAnimePopup.style.display = "block";
        });

        function closePopup() {
            addAnimePopup.style.display = "none";
        }

        function closeEpisodeModal() {
            document.getElementById("addEpisodeModal").style.display = "none";
        }
    </script>
</body>
</html>
